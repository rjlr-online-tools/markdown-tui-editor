var be=Object.defineProperty;var we=(t,e,_)=>e in t?be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:_}):t[e]=_;var P=(t,e,_)=>(we(t,typeof e!="symbol"?e+"":e,_),_),He=(t,e,_)=>{if(!e.has(t))throw TypeError("Cannot "+_)};var K=(t,e,_)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,_)},J=(t,e,_,r)=>(He(t,e,"write to private field"),r?r.call(t,_):e.set(t,_),_);import Ee from"https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function _(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=_(i);fetch(i.href,o)}})();var R,s,ce,N,Q,U={},se=[],Ne=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function w(t,e){for(var _ in e)t[_]=e[_];return t}function ae(t){var e=t.parentNode;e&&e.removeChild(t)}function Se(t,e,_){var r,i,o,l={};for(o in e)o=="key"?r=e[o]:o=="ref"?i=e[o]:l[o]=e[o];if(arguments.length>2&&(l.children=arguments.length>3?R.call(arguments,2):_),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)l[o]===void 0&&(l[o]=t.defaultProps[o]);return A(t,l,r,i,null)}function A(t,e,_,r,i){var o={type:t,props:e,key:_,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++ce:i};return i==null&&s.vnode!=null&&s.vnode(o),o}function x(t){return t.children}function C(t,e){this.props=t,this.context=e}function S(t,e){if(e==null)return t.__?S(t.__,t.__.__k.indexOf(t)+1):null;for(var _;e<t.__k.length;e++)if((_=t.__k[e])!=null&&_.__e!=null)return _.__e;return typeof t.type=="function"?S(t):null}function ue(t){var e,_;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((_=t.__k[e])!=null&&_.__e!=null){t.__e=t.__c.base=_.__e;break}return ue(t)}}function X(t){(!t.__d&&(t.__d=!0)&&N.push(t)&&!D.__r++||Q!==s.debounceRendering)&&((Q=s.debounceRendering)||setTimeout)(D)}function D(){for(var t;D.__r=N.length;)t=N.sort(function(e,_){return e.__v.__b-_.__v.__b}),N=[],t.some(function(e){var _,r,i,o,l,a;e.__d&&(l=(o=(_=e).__v).__e,(a=_.__P)&&(r=[],(i=w({},o)).__v=o.__v+1,z(a,o,i,_.__n,a.ownerSVGElement!==void 0,o.__h!=null?[l]:null,r,l==null?S(o):l,o.__h),he(r,o),o.__e!=l&&ue(o)))})}function fe(t,e,_,r,i,o,l,a,d,p){var n,h,u,c,f,H,v,y=r&&r.__k||se,k=y.length;for(_.__k=[],n=0;n<e.length;n++)if((c=_.__k[n]=(c=e[n])==null||typeof c=="boolean"?null:typeof c=="string"||typeof c=="number"||typeof c=="bigint"?A(null,c,null,null,c):Array.isArray(c)?A(x,{children:c},null,null,null):c.__b>0?A(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c)!=null){if(c.__=_,c.__b=_.__b+1,(u=y[n])===null||u&&c.key==u.key&&c.type===u.type)y[n]=void 0;else for(h=0;h<k;h++){if((u=y[h])&&c.key==u.key&&c.type===u.type){y[h]=void 0;break}u=null}z(t,c,u=u||U,i,o,l,a,d,p),f=c.__e,(h=c.ref)&&u.ref!=h&&(v||(v=[]),u.ref&&v.push(u.ref,null,c),v.push(h,c.__c||f,c)),f!=null?(H==null&&(H=f),typeof c.type=="function"&&c.__k===u.__k?c.__d=d=de(c,d,t):d=pe(t,c,u,y,f,d),typeof _.type=="function"&&(_.__d=d)):d&&u.__e==d&&d.parentNode!=t&&(d=S(u))}for(_.__e=H,n=k;n--;)y[n]!=null&&me(y[n],y[n]);if(v)for(n=0;n<v.length;n++)ve(v[n],v[++n],v[++n])}function de(t,e,_){for(var r,i=t.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=t,e=typeof r.type=="function"?de(r,e,_):pe(_,r,r,i,r.__e,e));return e}function pe(t,e,_,r,i,o){var l,a,d;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(_==null||i!=o||i.parentNode==null)e:if(o==null||o.parentNode!==t)t.appendChild(i),l=null;else{for(a=o,d=0;(a=a.nextSibling)&&d<r.length;d+=2)if(a==i)break e;t.insertBefore(i,o),l=o}return l!==void 0?l:i.nextSibling}function xe(t,e,_,r,i){var o;for(o in _)o==="children"||o==="key"||o in e||I(t,o,null,_[o],r);for(o in e)i&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||_[o]===e[o]||I(t,o,e[o],_[o],r)}function Y(t,e,_){e[0]==="-"?t.setProperty(e,_):t[e]=_==null?"":typeof _!="number"||Ne.test(e)?_:_+"px"}function I(t,e,_,r,i){var o;e:if(e==="style")if(typeof _=="string")t.style.cssText=_;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)_&&e in _||Y(t.style,e,"");if(_)for(e in _)r&&_[e]===r[e]||Y(t.style,e,_[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=_,_?r||t.addEventListener(e,o?ee:Z,o):t.removeEventListener(e,o?ee:Z,o);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=_==null?"":_;break e}catch{}typeof _=="function"||(_==null||_===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,_))}}function Z(t){this.l[t.type+!1](s.event?s.event(t):t)}function ee(t){this.l[t.type+!0](s.event?s.event(t):t)}function z(t,e,_,r,i,o,l,a,d){var p,n,h,u,c,f,H,v,y,k,L,E,G,T,$,g=e.type;if(e.constructor!==void 0)return null;_.__h!=null&&(d=_.__h,a=e.__e=_.__e,e.__h=null,o=[a]),(p=s.__b)&&p(e);try{e:if(typeof g=="function"){if(v=e.props,y=(p=g.contextType)&&r[p.__c],k=p?y?y.props.value:p.__:r,_.__c?H=(n=e.__c=_.__c).__=n.__E:("prototype"in g&&g.prototype.render?e.__c=n=new g(v,k):(e.__c=n=new C(v,k),n.constructor=g,n.render=Te),y&&y.sub(n),n.props=v,n.state||(n.state={}),n.context=k,n.__n=r,h=n.__d=!0,n.__h=[],n._sb=[]),n.__s==null&&(n.__s=n.state),g.getDerivedStateFromProps!=null&&(n.__s==n.state&&(n.__s=w({},n.__s)),w(n.__s,g.getDerivedStateFromProps(v,n.__s))),u=n.props,c=n.state,h)g.getDerivedStateFromProps==null&&n.componentWillMount!=null&&n.componentWillMount(),n.componentDidMount!=null&&n.__h.push(n.componentDidMount);else{if(g.getDerivedStateFromProps==null&&v!==u&&n.componentWillReceiveProps!=null&&n.componentWillReceiveProps(v,k),!n.__e&&n.shouldComponentUpdate!=null&&n.shouldComponentUpdate(v,n.__s,k)===!1||e.__v===_.__v){for(n.props=v,n.state=n.__s,e.__v!==_.__v&&(n.__d=!1),n.__v=e,e.__e=_.__e,e.__k=_.__k,e.__k.forEach(function(M){M&&(M.__=e)}),L=0;L<n._sb.length;L++)n.__h.push(n._sb[L]);n._sb=[],n.__h.length&&l.push(n);break e}n.componentWillUpdate!=null&&n.componentWillUpdate(v,n.__s,k),n.componentDidUpdate!=null&&n.__h.push(function(){n.componentDidUpdate(u,c,f)})}if(n.context=k,n.props=v,n.__v=e,n.__P=t,E=s.__r,G=0,"prototype"in g&&g.prototype.render){for(n.state=n.__s,n.__d=!1,E&&E(e),p=n.render(n.props,n.state,n.context),T=0;T<n._sb.length;T++)n.__h.push(n._sb[T]);n._sb=[]}else do n.__d=!1,E&&E(e),p=n.render(n.props,n.state,n.context),n.state=n.__s;while(n.__d&&++G<25);n.state=n.__s,n.getChildContext!=null&&(r=w(w({},r),n.getChildContext())),h||n.getSnapshotBeforeUpdate==null||(f=n.getSnapshotBeforeUpdate(u,c)),$=p!=null&&p.type===x&&p.key==null?p.props.children:p,fe(t,Array.isArray($)?$:[$],e,_,r,i,o,l,a,d),n.base=e.__e,e.__h=null,n.__h.length&&l.push(n),H&&(n.__E=n.__=null),n.__e=!1}else o==null&&e.__v===_.__v?(e.__k=_.__k,e.__e=_.__e):e.__e=Le(_.__e,e,_,r,i,o,l,d);(p=s.diffed)&&p(e)}catch(M){e.__v=null,(d||o!=null)&&(e.__e=a,e.__h=!!d,o[o.indexOf(a)]=null),s.__e(M,e,_)}}function he(t,e){s.__c&&s.__c(e,t),t.some(function(_){try{t=_.__h,_.__h=[],t.some(function(r){r.call(_)})}catch(r){s.__e(r,_.__v)}})}function Le(t,e,_,r,i,o,l,a){var d,p,n,h=_.props,u=e.props,c=e.type,f=0;if(c==="svg"&&(i=!0),o!=null){for(;f<o.length;f++)if((d=o[f])&&"setAttribute"in d==!!c&&(c?d.localName===c:d.nodeType===3)){t=d,o[f]=null;break}}if(t==null){if(c===null)return document.createTextNode(u);t=i?document.createElementNS("http://www.w3.org/2000/svg",c):document.createElement(c,u.is&&u),o=null,a=!1}if(c===null)h===u||a&&t.data===u||(t.data=u);else{if(o=o&&R.call(t.childNodes),p=(h=_.props||U).dangerouslySetInnerHTML,n=u.dangerouslySetInnerHTML,!a){if(o!=null)for(h={},f=0;f<t.attributes.length;f++)h[t.attributes[f].name]=t.attributes[f].value;(n||p)&&(n&&(p&&n.__html==p.__html||n.__html===t.innerHTML)||(t.innerHTML=n&&n.__html||""))}if(xe(t,u,h,i,a),n)e.__k=[];else if(f=e.props.children,fe(t,Array.isArray(f)?f:[f],e,_,r,i&&c!=="foreignObject",o,l,o?o[0]:_.__k&&S(_,0),a),o!=null)for(f=o.length;f--;)o[f]!=null&&ae(o[f]);a||("value"in u&&(f=u.value)!==void 0&&(f!==t.value||c==="progress"&&!f||c==="option"&&f!==h.value)&&I(t,"value",f,h.value,!1),"checked"in u&&(f=u.checked)!==void 0&&f!==t.checked&&I(t,"checked",f,h.checked,!1))}return t}function ve(t,e,_){try{typeof t=="function"?t(e):t.current=e}catch(r){s.__e(r,_)}}function me(t,e,_){var r,i;if(s.unmount&&s.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||ve(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){s.__e(o,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&me(r[i],e,_||typeof t.type!="function");_||t.__e==null||ae(t.__e),t.__=t.__e=t.__d=void 0}function Te(t,e,_){return this.constructor(t,_)}function $e(t,e,_){var r,i,o;s.__&&s.__(t,e),i=(r=typeof _=="function")?null:_&&_.__k||e.__k,o=[],z(e,t=(!r&&_||e).__k=Se(x,null,[t]),i||U,U,e.ownerSVGElement!==void 0,!r&&_?[_]:i?null:e.firstChild?R.call(e.childNodes):null,o,!r&&_?_:i?i.__e:e.firstChild,r),he(o,t)}R=se.slice,s={__e:function(t,e,_,r){for(var i,o,l;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),l=i.__d),l)return i.__E=i}catch(a){t=a}throw t}},ce=0,C.prototype.setState=function(t,e){var _;_=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=w({},this.state),typeof t=="function"&&(t=t(w({},_),this.props)),t&&w(_,t),t!=null&&this.__v&&(e&&this._sb.push(e),X(this))},C.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),X(this))},C.prototype.render=x,N=[],D.__r=0;var j,m,V,te,q=0,ye=[],F=[],_e=s.__b,ne=s.__r,oe=s.diffed,re=s.__c,ie=s.unmount;function ge(t,e){s.__h&&s.__h(m,t,q||e),q=0;var _=m.__H||(m.__H={__:[],__h:[]});return t>=_.__.length&&_.__.push({__V:F}),_.__[t]}function Me(t){return q=1,Pe(ke,t)}function Pe(t,e,_){var r=ge(j++,2);if(r.t=t,!r.__c&&(r.__=[_?_(e):ke(void 0,e),function(o){var l=r.__N?r.__N[0]:r.__[0],a=r.t(l,o);l!==a&&(r.__N=[a,r.__[1]],r.__c.setState({}))}],r.__c=m,!m.u)){m.u=!0;var i=m.shouldComponentUpdate;m.shouldComponentUpdate=function(o,l,a){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(n){return n.__c});if(d.every(function(n){return!n.__N}))return!i||i.call(this,o,l,a);var p=!1;return d.forEach(function(n){if(n.__N){var h=n.__[0];n.__=n.__N,n.__N=void 0,h!==n.__[0]&&(p=!0)}}),!(!p&&r.__c.props===o)&&(!i||i.call(this,o,l,a))}}return r.__N||r.__}function Ae(t,e){var _=ge(j++,3);!s.__s&&Oe(_.__H,e)&&(_.__=t,_.i=e,m.__H.__h.push(_))}function Ce(){for(var t;t=ye.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(O),t.__H.__h.forEach(B),t.__H.__h=[]}catch(e){t.__H.__h=[],s.__e(e,t.__v)}}s.__b=function(t){typeof t.type!="function"||t.__m||t.__===null?t.__m||(t.__m=t.__&&t.__.__m?t.__.__m:""):t.__m=(t.__&&t.__.__m?t.__.__m:"")+(t.__&&t.__.__k?t.__.__k.indexOf(t):0),m=null,_e&&_e(t)},s.__r=function(t){ne&&ne(t),j=0;var e=(m=t.__c).__H;e&&(V===m?(e.__h=[],m.__h=[],e.__.forEach(function(_){_.__N&&(_.__=_.__N),_.__V=F,_.__N=_.i=void 0})):(e.__h.forEach(O),e.__h.forEach(B),e.__h=[])),V=m},s.diffed=function(t){oe&&oe(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(ye.push(e)!==1&&te===s.requestAnimationFrame||((te=s.requestAnimationFrame)||Fe)(Ce)),e.__H.__.forEach(function(_){_.i&&(_.__H=_.i),_.__V!==F&&(_.__=_.__V),_.i=void 0,_.__V=F})),V=m=null},s.__c=function(t,e){e.some(function(_){try{_.__h.forEach(O),_.__h=_.__h.filter(function(r){return!r.__||B(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],s.__e(r,_.__v)}}),re&&re(t,e)},s.unmount=function(t){ie&&ie(t);var e,_=t.__c;_&&_.__H&&(_.__H.__.forEach(function(r){try{O(r)}catch(i){e=i}}),_.__H=void 0,e&&s.__e(e,_.__v))};var le=typeof requestAnimationFrame=="function";function Fe(t){var e,_=function(){clearTimeout(r),le&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(_,100);le&&(e=requestAnimationFrame(_))}function O(t){var e=m,_=t.__c;typeof _=="function"&&(t.__c=void 0,_()),m=e}function B(t){var e=m;t.__c=t.__(),m=e}function Oe(t,e){return!t||t.length!==e.length||e.some(function(_,r){return _!==t[r]})}function ke(t,e){return typeof e=="function"?e(t):e}class Ue{constructor(){}async open(e,_){const i=await(await fetch(e)).text();_(i)}save(){throw new Error("Method not implemented.")}}class De{constructor(e){P(this,"fileService");this.editor=e,this.fileService=new Ue}init(){document.addEventListener("keydown",e=>{e.ctrlKey&&e.key==="s"&&(e.preventDefault(),console.log("CTRL + S"),window.opener.postMessage({event:"save",data:this.editor.getMarkdown()},"*"))}),window.addEventListener("message",e=>{if(e.data.action&&e.source==window.opener){var _=e.data;if(_.action=="load"){const r=_.data;console.log("Selected file: "+r),this.fileService.open(r,i=>{this.editor.setMarkdown(i,!1)})}}},!1),window.opener.postMessage({event:"init",data:"from-editor"},"*")}}var W;class Ie{constructor(){K(this,W,void 0)}async open(){const e={types:[{description:"Markdown",accept:{"text/*":[".md"]}}],excludeAcceptAllOption:!0,multiple:!1};let _;if([_]=await window.showOpenFilePicker(e),J(this,W,_),_.kind==="file")return await(await _.getFile()).text();throw Error("Please select a markdown file")}}W=new WeakMap;function We(){return{toHTMLRenderers:{drawio(e){return[{type:"openTag",tagName:"div",outerNewLine:!0},{type:"html",content:{innerHTML:"fake"}.innerHTML},{type:"closeTag",tagName:"div",outerNewLine:!0}]},mermaid(e){return setTimeout(()=>{Ee.init(),console.log("mermaid.init()")},200),[{type:"openTag",tagName:"pre",outerNewLine:!0,attributes:{class:"mermaid"}},{type:"html",content:e.literal},{type:"closeTag",tagName:"pre",outerNewLine:!0}]},plantuml(e){return[]}}}}const{Editor:Re}=toastui,{codeSyntaxHighlight:Ve}=Re.plugin;class qe{constructor(){P(this,"editor");P(this,"localFileService");this.localFileService=new Ie,this.editor=new toastui.Editor({el:document.querySelector("#editor"),height:"100%",initialValue:"...",initialEditType:"wysiwyg",usageStatistics:!0,toolbarItems:this.initToolbar(),plugins:[Ve,We]})}openFile(){this.localFileService.open().then(e=>{debugger;this.editor.setMarkdown(e)})}initToolbar(){var e=this;function _(){const r=document.createElement("button");return r.className="toastui-editor-toolbar-icons",r.style.backgroundImage="none",r.style.margin="0",r.innerHTML="Open",r.addEventListener("click",()=>{e.openFile()}),r}return[[{el:_(),command:"open",tooltip:"Open File"}],["heading","bold","italic","strike"],["hr","quote"],["ul","ol","task","indent","outdent"],["table","image","link"],["code","codeblock"]]}getMarkdown(){return this.editor.getMarkdown()}}var Be=0;function b(t,e,_,r,i){var o,l,a={};for(l in e)l=="ref"?o=e[l]:a[l]=e[l];var d={type:t,props:a,key:_,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Be,__source:i,__self:r};if(typeof t=="function"&&(o=t.defaultProps))for(l in o)a[l]===void 0&&(a[l]=o[l]);return s.vnode&&s.vnode(d),d}function ze(){Me(0);const t=()=>{const e=new qe;new URLSearchParams(window.location.search).get("embed")==="1"&&new De(e).init()};return Ae(()=>{t()},[]),b(x,{children:b("div",{class:"box",children:[b("div",{class:"row header",children:b("p",{children:"header (sized to content) "})}),b("div",{class:"row content",children:b("div",{id:"editor"})}),b("div",{class:"row footer",children:b("p",{children:"footer (fixed height)"})})]})})}$e(b(ze,{}),document.getElementById("app"));
